"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[187],{2441:function(a,t,s){s.r(t),s.d(t,{default:function(){return _}});var e=function(){var a=this,t=a._self._c;return t("div",[t("TypeNav"),t("div",{staticClass:"main"},[t("div",{staticClass:"py-container"},[t("div",{staticClass:"bread"},[a._m(0),t("ul",{staticClass:"fl sui-tag"},[a.searchParams.categoryName?t("li",{staticClass:"with-x"},[a._v(a._s(a.searchParams.categoryName)),t("i",{staticClass:"delete-icon",on:{click:a.removeCategoryName}},[a._v("×")])]):a._e(),a.searchParams.keyword?t("li",{staticClass:"with-x"},[a._v(a._s(a.searchParams.keyword)),t("i",{staticClass:"delete-icon",on:{click:a.removeKeyword}},[a._v("×")])]):a._e(),a.searchParams.trademark?t("li",{staticClass:"with-x"},[a._v(a._s(a.searchParams.trademark.trademarkName)),t("i",{staticClass:"delete-icon",on:{click:a.removeTrademark}},[a._v("×")])]):a._e()])]),t("SearchSelector"),t("div",{staticClass:"details clearfix"},[t("div",{staticClass:"sui-navbar"},[t("div",{staticClass:"navbar-inner filter"},[t("ul",{staticClass:"sui-nav"},[t("li",{class:{active:a.isOneActive},on:{click:function(t){return a.changeOrder("1")}}},[t("a",[a._v("综合"),a.isOneActive?t("span",[a._v("⬆")]):a._e()])]),t("li",{class:{active:a.isTwoActive},on:{click:function(t){return a.changeOrder("2")}}},[t("a",[a._v("价格"),a.isTwoActive?t("span",[a._v("⬆")]):a._e()])])])])]),t("div",{staticClass:"goods-list"},[t("ul",{staticClass:"yui3-g"},a._l(a.goodsList,function(s){return t("li",{key:s.id,staticClass:"yui3-u-1-5"},[t("div",{staticClass:"list-wrap"},[t("div",{staticClass:"p-img"},[t("router-link",{attrs:{to:"/detail/"+s.id}},[t("img",{attrs:{src:s.imgUrl}})])],1),t("div",{staticClass:"price"},[t("strong",[t("em",[a._v("¥")]),t("i",[a._v(a._s(s.price))])])]),t("div",{staticClass:"attr"},[t("a",{attrs:{target:"_blank",href:"item.html",title:"促销信息，下单即赠送三个月CIBN视频会员卡！【小米电视新品4A 58 火爆预约中】"}},[a._v(" "+a._s(s.name)+" ")])]),t("div",{staticClass:"commit"},[t("i",{staticClass:"command"},[a._v("已有"),t("span",[a._v(a._s(s.count))]),a._v("人评价")])]),a._m(1,!0)])])}),0)]),t("Pagination",{attrs:{total:a.total,pageSize:a.pageSize,totalPages:a.totalPages,pageNum:a.searchParams.pageNum},on:{changePage:a.changePage}})],1)],1)])],1)},r=[function(){var a=this,t=a._self._c;return t("ul",{staticClass:"fl sui-breadcrumb"},[t("li",[t("a",{attrs:{href:"#"}},[a._v("全部结果")])])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"operate"},[t("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[a._v("加入购物车")]),t("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[a._v("收藏")])])}],i=(s(4114),function(){var a=this,t=a._self._c;return t("div",{staticClass:"clearfix selector"},[t("div",{staticClass:"type-wrap logo"},[t("div",{staticClass:"fl key brand"},[a._v("品牌")]),t("div",{staticClass:"value logos"},[t("ul",{staticClass:"logo-list"},a._l(a.trademarkList,function(s){return t("li",{key:s.trademarkId,on:{click:function(t){return a.handleClick(s.trademarkId,s.trademarkName)}}},[a._v(a._s(s.trademarkName))])}),0)]),a._m(0)]),a._l(a.attrsList,function(s){return t("div",{key:s.attrId,staticClass:"type-wrap"},[t("div",{staticClass:"fl key"},[a._v(a._s(s.attrName))]),t("div",{staticClass:"fl value"},[t("ul",{staticClass:"type-list"},a._l(s.attrValueList,function(s){return t("li",{key:s.attrValueId},[t("a",[a._v(a._s(s.attrValueName))])])}),0)])])})],2)}),c=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"ext"},[t("a",{staticClass:"sui-btn",attrs:{href:"javascript:void(0);"}},[a._v("多选")]),t("a",{attrs:{href:"javascript:void(0);"}},[a._v("更多")])])}],l=s(3518),o={name:"SearchSelector",computed:{...(0,l.L8)({trademarkList:"search/trademarkList",attrsList:"search/attrsList"})},methods:{handleClick(a,t){alert(a+t),this.$bus.$emit("updateBrandId",a,t)}}},d=o,h=s(1656),n=(0,h.A)(d,i,c,!1,null,"cdf27016",null),m=n.exports,u={name:"Search",components:{SearchSelector:m},mounted(){this.getData(),this.$bus.$on("updateBrandId",(a,t)=>{this.searchParams.trademark={trademarkId:a,trademarkName:t},this.getData()})},data(){return{searchParams:{keyword:"",category1Id:"",category2Id:"",category3Id:"",categoryName:"",order:"1:desc",pageNum:1,pageSize:5,prop:"price",trademark:""}}},beforeMount(){Object.assign(this.searchParams,this.$route.params,this.$route.query),console.log(this.searchParams)},beforeDestroy(){this.$bus.$off("updateBrandId")},computed:{...(0,l.L8)({goodsList:"search/goodsList",trademarkList:"search/trademarkList",attrList:"search/attrsList",total:"search/total",pageSize:"search/pageSize",totalPages:"search/totalPages",pageNum:"search/pageNum"}),isOneActive(){return-1!=this.searchParams.order.indexOf("1")},isTwoActive(){return-1!=this.searchParams.order.indexOf("2")}},watch:{$route:{handler(a,t){this.searchParams.category1Id="",this.searchParams.category2Id="",this.searchParams.category3Id="",Object.assign(this.searchParams,this.$route.params,this.$route.query),this.getData()},immediate:!0}},methods:{getData(){this.$store.dispatch("search/getSearchList",this.searchParams)},removeCategoryName(){this.searchParams.categoryName="",this.searchParams.category1Id="",this.searchParams.category2Id="",this.searchParams.category3Id="",this.$router.push({name:"search",params:this.$route.params})},removeKeyword(){this.searchParams.keyword="",this.$router.push({name:"search",query:this.$route.query}),this.$bus.$emit("clear")},removeTrademark(){this.searchParams.trademark="",this.getData()},changeOrder(a){"1"===a&&this.isOneActive||"2"===a&&this.isTwoActive?this.searchParams.order=this.searchParams.order.includes("desc")?`${a}:asc`:`${a}:desc`:this.searchParams.order=`${a}:desc`,this.getData()},changePage(a){this.searchParams.pageNum=a,this.getData()}}},v=u,g=(0,h.A)(v,e,r,!1,null,"55300cea",null),_=g.exports}}]);